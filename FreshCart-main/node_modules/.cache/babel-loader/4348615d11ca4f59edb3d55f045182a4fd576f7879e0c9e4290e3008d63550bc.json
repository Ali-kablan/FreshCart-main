{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\keplo\\\\Downloads\\\\FreshCart-main\\\\FreshCart-main\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useState } from \"react\";\nimport { createContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport let cartContext = /*#__PURE__*/createContext();\nexport default function CartContextProvider(props) {\n  _s();\n  const [cartNumber, setCartNumber] = useState();\n  const [wishListNumber, setWishListNumber] = useState();\n  const [dataWishList, setDataWishList] = useState([]);\n  const [cartId, setCartId] = useState(null);\n\n  // const [data, setData] = useState([JSON.parse(localStorage.getItem(\"data\") || \"[]\")]);\n\n  let Baseurl = \"https://ecommerce.routemisr.com\";\n  let header = {\n    token: localStorage.getItem(\"userToken\")\n  };\n\n  /*   const hostname = window.location.host;\n    let param = {\n      url: \"https://\" + hostname,\n    }; */\n\n  function addToCart(id) {\n    return axios.post(`${Baseurl}/api/v1/cart`, {\n      productId: id\n    }, {\n      headers: {\n        token: localStorage.getItem(\"userToken\")\n      }\n    }).then(res => {\n      // console.log(res);\n      toast.success(res.data.message);\n      setCartNumber(res.data.numOfCartItems);\n      // console.log(cartNumber);\n      // localStorage.setItem('data',JSON.stringify(res.data.data));\n    }).catch(err => err);\n  }\n  /* \n    function getCart() {\n    return axios.get(`${Baseurl}/api/v1/cart`, {\n        headers: header,\n    })\n  } */\n\n  function getCart() {\n    return axios.get(`${Baseurl}/api/v1/cart`, {\n      headers: {\n        token: localStorage.getItem(\"userToken\")\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        let cartNum = res.data.numOfCartItems;\n        if (cartNum === 0) {\n          cartNum = \"\";\n        }\n        setCartNumber(cartNum);\n        // console.log(res.data.data.products);\n        setCartId(res.data.data._id);\n        localStorage.setItem(\"userId\", res.data.data.cartOwner);\n      }\n      return res;\n    }).catch(err => {\n      // console.log(err);\n    });\n  }\n  function updateCart(id, count) {\n    return axios.put(`${Baseurl}/api/v1/cart/${id}`, {\n      count: count\n    }, {\n      headers: {\n        token: localStorage.getItem(\"userToken\")\n      }\n    });\n  }\n  function deleteCart(id) {\n    return axios.delete(`${Baseurl}/api/v1/cart/${id}`, {\n      headers: {\n        token: localStorage.getItem(\"userToken\")\n      }\n    });\n  }\n  function clearCart() {\n    return axios.delete(`${Baseurl}/api/v1/cart`, {\n      headers: {\n        token: localStorage.getItem(\"userToken\")\n      }\n    });\n  }\n  function checkOutPayment(id, formDeta) {\n    return axios.post(`${Baseurl}/api/v1/orders/checkout-session/${id}?url=https://freshcart-sherif-el-sheikhs-projects.vercel.app/`, {\n      shippingAddress: formDeta\n    }, {\n      headers: {\n        token: localStorage.getItem(\"userToken\")\n      }\n    });\n  }\n  function addToWishList(id) {\n    return axios.post(`${Baseurl}/api/v1/wishlist`, {\n      productId: id\n    }, {\n      headers: {\n        token: localStorage.getItem(\"userToken\")\n      }\n    });\n  }\n\n  /*   function getWishList() {\n    return axios\n      .get(`${Baseurl}/api/v1/wishlist`, {\n        headers: header,\n      })\n  } */\n\n  async function getWishList() {\n    return axios.get(`${Baseurl}/api/v1/wishlist`, {\n      headers: {\n        token: localStorage.getItem(\"userToken\")\n      }\n    }).then(res => {\n      if (res.data.data.length) {\n        let wishNum = res.data.data.length;\n        if (wishNum === 0) {\n          wishNum = \"\";\n        }\n        setWishListNumber(wishNum);\n      }\n      return res;\n    }).catch(err => err);\n  }\n\n  // async function getWishList() {\n  //   try {\n  //     const res = await axios.get(`${Baseurl}/api/v1/wishlist`, {\n  //       headers: header,\n  //     });\n  //     if (res.data.data.length) {\n  //       setWishListNumber(res.data.data.length);\n  //     }\n  //     return res;\n  //   } catch (err) {\n  //     return err;\n  //   }\n  // }\n\n  function deleteWishList(id) {\n    return axios.delete(`${Baseurl}/api/v1/wishlist/${id}`, {\n      headers: {\n        token: localStorage.getItem(\"userToken\")\n      }\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(cartContext.Provider, {\n    value: {\n      addToCart,\n      cartNumber,\n      setCartNumber,\n      getCart,\n      updateCart,\n      deleteCart,\n      clearCart,\n      checkOutPayment,\n      wishListNumber,\n      setWishListNumber,\n      addToWishList,\n      getWishList,\n      deleteWishList,\n      dataWishList,\n      setDataWishList,\n      header,\n      cartId\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 5\n  }, this);\n}\n_s(CartContextProvider, \"IFu5IoucsffCQKX0X6QUHKLLJBU=\");\n_c = CartContextProvider;\nvar _c;\n$RefreshReg$(_c, \"CartContextProvider\");","map":{"version":3,"names":["axios","useState","createContext","toast","jsxDEV","_jsxDEV","cartContext","CartContextProvider","props","_s","cartNumber","setCartNumber","wishListNumber","setWishListNumber","dataWishList","setDataWishList","cartId","setCartId","Baseurl","header","token","localStorage","getItem","addToCart","id","post","productId","headers","then","res","success","data","message","numOfCartItems","catch","err","getCart","get","status","cartNum","_id","setItem","cartOwner","updateCart","count","put","deleteCart","delete","clearCart","checkOutPayment","formDeta","shippingAddress","addToWishList","getWishList","length","wishNum","deleteWishList","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/keplo/Downloads/FreshCart-main/FreshCart-main/src/context/CartContext.js"],"sourcesContent":["import axios from \"axios\";\nimport { useState } from \"react\";\nimport { createContext } from \"react\";\nimport { toast } from \"react-toastify\";\n\nexport let cartContext = createContext();\n\nexport default function CartContextProvider(props) {\n  const [cartNumber, setCartNumber] = useState();\n  const [wishListNumber, setWishListNumber] = useState();\n  const [dataWishList, setDataWishList] = useState([]);\n  const [cartId, setCartId] = useState(null);\n\n  // const [data, setData] = useState([JSON.parse(localStorage.getItem(\"data\") || \"[]\")]);\n\n  let Baseurl = \"https://ecommerce.routemisr.com\";\n\n  let header = {\n    token: localStorage.getItem(\"userToken\"),\n  };\n\n/*   const hostname = window.location.host;\n  let param = {\n    url: \"https://\" + hostname,\n  }; */\n\n  function addToCart(id) {\n    return axios\n      .post(\n        `${Baseurl}/api/v1/cart`,\n        {\n          productId: id,\n        },\n        {\n          headers: {\n            token: localStorage.getItem(\"userToken\"),\n          },\n        }\n      )\n      .then((res) => {\n        // console.log(res);\n        toast.success(res.data.message);\n        setCartNumber(res.data.numOfCartItems);\n        // console.log(cartNumber);\n        // localStorage.setItem('data',JSON.stringify(res.data.data));\n      })\n      .catch((err) => err);\n  }\n  /* \n    function getCart() {\n    return axios.get(`${Baseurl}/api/v1/cart`, {\n        headers: header,\n    })\n  } */\n\n  function getCart() {\n    return axios\n      .get(`${Baseurl}/api/v1/cart`, {\n        headers: {\n          token: localStorage.getItem(\"userToken\"),\n        },\n      })\n      .then((res) => {\n        if (res.status === 200) {\n          let cartNum = res.data.numOfCartItems;\n          if (cartNum === 0) {\n            cartNum = \"\";\n          }\n          setCartNumber(cartNum);\n          // console.log(res.data.data.products);\n          setCartId(res.data.data._id);\n          localStorage.setItem(\"userId\", res.data.data.cartOwner);\n        }\n        return res;\n      })\n      .catch((err) => {\n        // console.log(err);\n      });\n  }\n\n  function updateCart(id, count) {\n    return axios.put(\n      `${Baseurl}/api/v1/cart/${id}`,\n      {\n        count: count,\n      },\n      {\n        headers: {\n          token: localStorage.getItem(\"userToken\"),\n        },\n      }\n    );\n  }\n\n  function deleteCart(id) {\n    return axios.delete(`${Baseurl}/api/v1/cart/${id}`, {\n      headers: {\n        token: localStorage.getItem(\"userToken\"),\n      },\n    });\n  }\n  function clearCart() {\n    return axios.delete(`${Baseurl}/api/v1/cart`, {\n      headers: {\n        token: localStorage.getItem(\"userToken\"),\n      },\n    });\n  }\n\n  function checkOutPayment(id, formDeta) {\n    return axios.post(\n      `${Baseurl}/api/v1/orders/checkout-session/${id}?url=https://freshcart-sherif-el-sheikhs-projects.vercel.app/`,\n      {\n        shippingAddress: formDeta,\n      },\n      {\n        headers: {\n          token: localStorage.getItem(\"userToken\"),\n        },\n      }\n    );\n  }\n\n  function addToWishList(id) {\n    return axios.post(\n      `${Baseurl}/api/v1/wishlist`,\n      {\n        productId: id,\n      },\n      {\n        headers: {\n          token: localStorage.getItem(\"userToken\"),\n        },\n      }\n    );\n  }\n\n  /*   function getWishList() {\n    return axios\n      .get(`${Baseurl}/api/v1/wishlist`, {\n        headers: header,\n      })\n  } */\n\n  async function getWishList() {\n    return axios\n      .get(`${Baseurl}/api/v1/wishlist`, {\n        headers: {\n          token: localStorage.getItem(\"userToken\"),\n        },\n      })\n      .then((res) => {\n        if (res.data.data.length) {\n          let wishNum = res.data.data.length;\n          if (wishNum === 0) {\n            wishNum = \"\";\n          }\n          setWishListNumber(wishNum);\n        }\n        return res;\n      })\n      .catch((err) => err);\n  }\n\n  // async function getWishList() {\n  //   try {\n  //     const res = await axios.get(`${Baseurl}/api/v1/wishlist`, {\n  //       headers: header,\n  //     });\n  //     if (res.data.data.length) {\n  //       setWishListNumber(res.data.data.length);\n  //     }\n  //     return res;\n  //   } catch (err) {\n  //     return err;\n  //   }\n  // }\n\n  function deleteWishList(id) {\n    return axios.delete(`${Baseurl}/api/v1/wishlist/${id}`, {\n      headers: {\n        token: localStorage.getItem(\"userToken\"),\n      },\n    });\n  }\n\n  return (\n    <cartContext.Provider\n      value={{\n        addToCart,\n        cartNumber,\n        setCartNumber,\n        getCart,\n        updateCart,\n        deleteCart,\n        clearCart,\n        checkOutPayment,\n        wishListNumber,\n        setWishListNumber,\n        addToWishList,\n        getWishList,\n        deleteWishList,\n        dataWishList,\n        setDataWishList,\n        header,\n        cartId,\n      }}\n    >\n      {props.children}\n    </cartContext.Provider>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}